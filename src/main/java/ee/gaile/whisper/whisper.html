<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Whisper ‚Äì –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            background: #f5f5f5;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        input, select, button {
            margin-top: 10px;
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover { background: #0056b3; }
        pre {
            background: #fff;
            padding: 10px;
            border-radius: 8px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
<h2>üéô Whisper: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –∏–∑ –≤–∏–¥–µ–æ –∏–ª–∏ –∞—É–¥–∏–æ</h2>

<form id="uploadForm">
    <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª (MP4, MP3, WAV –∏ —Ç.–¥.):</label>
    <input type="file" name="file" accept=".mp4,.mp3,.wav,.m4a" required>

    <label>–Ø–∑—ã–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
    <select name="lang">
        <option value="">–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</option>
        <option value="en-US">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
        <option value="et-EE">–≠—Å—Ç–æ–Ω—Å–∫–∏–π</option>
        <option value="ru-RU">–†—É—Å—Å–∫–∏–π</option>
    </select>

    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</form>

<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
<pre id="result">‚Äì</pre>

<script>
    const form = document.getElementById('uploadForm');
    const resultBox = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData(form);

        resultBox.textContent = "‚è≥ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ...";

        try {
            const response = await fetch('http://localhost:8395/transcribe', {
                method: 'POST',
                body: formData
            });

            if (!response.ok) throw new Error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–∞–π–ª–∞");
            const data = await response.json();

            resultBox.textContent = data.text || JSON.stringify(data, null, 2);
        } catch (err) {
            resultBox.textContent = "‚ùå " + err.message;
        }
    });
</script>
</body>
</html>
